import{$ as C,r as y,K as ye,T as ve,j as u,A as H,o as i,c as k,G as h,S as J,f as o,d as t,e as l,k as M,F as N,B as I,l as p,p as m,Q as W,m as X,D as Y,x as ge,v as be}from"./index-xkeR0p3z.js";function he(r){return C({url:"/system/notice/list",method:"get",params:r})}function Ve(r){return C({url:"/system/notice/"+r,method:"get"})}function we(r){return C({url:"/system/notice",method:"post",data:r})}function Te(r){return C({url:"/system/notice",method:"put",data:r})}function ke(r){return C({url:"/system/notice/"+r,method:"delete"})}const Ce={class:"app-container"},Se={class:"dialog-footer"},Ue=ge({name:"Notice"}),Ie=Object.assign(Ue,{setup(r){const{proxy:v}=be(),{sys_notice_status:K,sys_notice_type:x,sys_user_role:Z}=v.useDict("sys_notice_status","sys_notice_type","sys_user_role"),Q=y([]),g=y(!1),B=y(!0),S=y(!0),D=y([]),z=y(!0),E=y(!0),R=y(0),$=y(""),ee=ye({form:{},queryParams:{pageNum:1,pageSize:10,noticeTitle:void 0,createBy:void 0,status:void 0},rules:{noticeTitle:[{required:!0,message:"公告标题不能为空",trigger:"blur"}],noticeType:[{required:!0,message:"公告类型不能为空",trigger:"change"}]}}),{queryParams:d,form:a,rules:te}=ve(ee);function V(){B.value=!0,he(d.value).then(s=>{Q.value=s.rows,R.value=s.total,B.value=!1})}function le(){g.value=!1,q()}function q(){a.value={noticeId:void 0,noticeTitle:void 0,noticeType:void 0,noticeContent:void 0,status:"0"},v.resetForm("noticeRef")}function U(){d.value.pageNum=1,V()}function oe(){v.resetForm("queryRef"),U()}function ne(s){D.value=s.map(n=>n.noticeId),z.value=s.length!=1,E.value=!s.length}function ae(){q(),g.value=!0,$.value="添加公告"}function L(s){q();const n=s.noticeId||D.value;Ve(n).then(w=>{a.value=w.data,g.value=!0,$.value="修改公告"})}function ue(){v.$refs.noticeRef.validate(s=>{s&&(a.value.noticeId!=null?Te(a.value).then(n=>{v.$modal.msgSuccess("修改成功"),g.value=!1,V()}):we(a.value).then(n=>{v.$modal.msgSuccess("新增成功"),g.value=!1,V()}))})}function j(s){const n=s.noticeId||D.value;v.$modal.confirm('是否确认删除公告编号为"'+n+'"的数据项？').then(function(){return ke(n)}).then(()=>{V(),v.$modal.msgSuccess("删除成功")}).catch(()=>{})}return V(),(s,n)=>{const w=u("el-input"),c=u("el-form-item"),P=u("el-option"),F=u("el-select"),_=u("el-button"),A=u("el-form"),f=u("el-col"),ie=u("right-toolbar"),G=u("el-row"),b=u("el-table-column"),O=u("dict-tag"),se=u("el-table"),de=u("pagination"),re=u("el-radio"),ce=u("el-radio-group"),pe=u("editor"),me=u("el-dialog"),T=H("hasPermi"),_e=H("loading");return i(),k("div",Ce,[h(t(A,{model:o(d),ref:"queryRef",inline:!0},{default:l(()=>[t(c,{label:"公告标题",prop:"noticeTitle"},{default:l(()=>[t(w,{modelValue:o(d).noticeTitle,"onUpdate:modelValue":n[0]||(n[0]=e=>o(d).noticeTitle=e),placeholder:"请输入公告标题",clearable:"",style:{width:"200px"},onKeyup:M(U,["enter"])},null,8,["modelValue"])]),_:1}),t(c,{label:"操作人员",prop:"createBy"},{default:l(()=>[t(w,{modelValue:o(d).createBy,"onUpdate:modelValue":n[1]||(n[1]=e=>o(d).createBy=e),placeholder:"请输入操作人员",clearable:"",style:{width:"200px"},onKeyup:M(U,["enter"])},null,8,["modelValue"])]),_:1}),t(c,{label:"类型",prop:"noticeType"},{default:l(()=>[t(F,{modelValue:o(d).noticeType,"onUpdate:modelValue":n[2]||(n[2]=e=>o(d).noticeType=e),placeholder:"公告类型",clearable:"",style:{width:"200px"}},{default:l(()=>[(i(!0),k(N,null,I(o(x),e=>(i(),p(P,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(c,null,{default:l(()=>[t(_,{type:"primary",icon:"Search",onClick:U},{default:l(()=>[m("搜索")]),_:1}),t(_,{icon:"Refresh",onClick:oe},{default:l(()=>[m("重置")]),_:1})]),_:1})]),_:1},8,["model"]),[[J,o(S)]]),t(G,{gutter:10,class:"mb8"},{default:l(()=>[t(f,{span:1.5},{default:l(()=>[h((i(),p(_,{type:"primary",plain:"",icon:"Plus",onClick:ae},{default:l(()=>[m("新增")]),_:1})),[[T,["system:notice:add"]]])]),_:1}),t(f,{span:1.5},{default:l(()=>[h((i(),p(_,{type:"success",plain:"",icon:"Edit",disabled:o(z),onClick:L},{default:l(()=>[m("修改")]),_:1},8,["disabled"])),[[T,["system:notice:edit"]]])]),_:1}),t(f,{span:1.5},{default:l(()=>[h((i(),p(_,{type:"danger",plain:"",icon:"Delete",disabled:o(E),onClick:j},{default:l(()=>[m("删除")]),_:1},8,["disabled"])),[[T,["system:notice:remove"]]])]),_:1}),t(ie,{showSearch:o(S),"onUpdate:showSearch":n[3]||(n[3]=e=>W(S)?S.value=e:null),onQueryTable:V},null,8,["showSearch"])]),_:1}),h((i(),p(se,{data:o(Q),onSelectionChange:ne},{default:l(()=>[t(b,{type:"selection",width:"55",align:"center"}),t(b,{label:"序号",align:"center",prop:"noticeId",width:"100"}),t(b,{label:"公告标题",align:"center",prop:"noticeTitle","show-overflow-tooltip":!0}),t(b,{label:"公告类型",align:"center",prop:"noticeType",width:"100"},{default:l(e=>[t(O,{options:o(x),value:e.row.noticeType},null,8,["options","value"])]),_:1}),t(b,{label:"状态",align:"center",prop:"status",width:"100"},{default:l(e=>[t(O,{options:o(K),value:e.row.status},null,8,["options","value"])]),_:1}),t(b,{label:"创建者",align:"center",prop:"createBy",width:"100"}),t(b,{label:"创建时间",align:"center",prop:"createTime",width:"100"},{default:l(e=>[X("span",null,Y(s.parseTime(e.row.createTime,"{y}-{m}-{d}")),1)]),_:1}),t(b,{label:"操作",align:"center","class-name":"small-padding fixed-width"},{default:l(e=>[h((i(),p(_,{link:"",type:"primary",icon:"Edit",onClick:fe=>L(e.row)},{default:l(()=>[m("修改")]),_:2},1032,["onClick"])),[[T,["system:notice:edit"]]]),h((i(),p(_,{link:"",type:"primary",icon:"Delete",onClick:fe=>j(e.row)},{default:l(()=>[m("删除")]),_:2},1032,["onClick"])),[[T,["system:notice:remove"]]])]),_:1})]),_:1},8,["data"])),[[_e,o(B)]]),h(t(de,{total:o(R),page:o(d).pageNum,"onUpdate:page":n[4]||(n[4]=e=>o(d).pageNum=e),limit:o(d).pageSize,"onUpdate:limit":n[5]||(n[5]=e=>o(d).pageSize=e),onPagination:V},null,8,["total","page","limit"]),[[J,o(R)>0]]),t(me,{title:o($),modelValue:o(g),"onUpdate:modelValue":n[12]||(n[12]=e=>W(g)?g.value=e:null),width:"780px","append-to-body":""},{footer:l(()=>[X("div",Se,[t(_,{type:"primary",onClick:ue},{default:l(()=>[m("确 定")]),_:1}),t(_,{onClick:le},{default:l(()=>[m("取 消")]),_:1})])]),default:l(()=>[t(A,{ref:"noticeRef",model:o(a),rules:o(te),"label-width":"80px"},{default:l(()=>[t(G,null,{default:l(()=>[t(f,{span:12},{default:l(()=>[t(c,{label:"公告标题",prop:"noticeTitle"},{default:l(()=>[t(w,{modelValue:o(a).noticeTitle,"onUpdate:modelValue":n[6]||(n[6]=e=>o(a).noticeTitle=e),placeholder:"请输入公告标题"},null,8,["modelValue"])]),_:1})]),_:1}),t(f,{span:12},{default:l(()=>[t(c,{label:"公告类型",prop:"noticeType"},{default:l(()=>[t(F,{modelValue:o(a).noticeType,"onUpdate:modelValue":n[7]||(n[7]=e=>o(a).noticeType=e),placeholder:"请选择"},{default:l(()=>[(i(!0),k(N,null,I(o(x),e=>(i(),p(P,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),t(f,{span:12},{default:l(()=>[t(c,{label:"通知人-用户类型",prop:"notice_user_type","label-width":"120"},{default:l(()=>[t(F,{modelValue:o(a).notice_user_type,"onUpdate:modelValue":n[8]||(n[8]=e=>o(a).notice_user_type=e),placeholder:"不填为全体可见",clearable:""},{default:l(()=>[(i(!0),k(N,null,I(o(Z),e=>(i(),p(P,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),t(f,{span:12},{default:l(()=>[t(c,{label:"通知人-课程id",prop:"notice_courseId","label-width":"100"},{default:l(()=>[t(w,{modelValue:o(a).notice_courseId,"onUpdate:modelValue":n[9]||(n[9]=e=>o(a).notice_courseId=e),placeholder:"不填为全体可见",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),t(f,{span:24},{default:l(()=>[t(c,{label:"状态"},{default:l(()=>[t(ce,{modelValue:o(a).status,"onUpdate:modelValue":n[10]||(n[10]=e=>o(a).status=e)},{default:l(()=>[(i(!0),k(N,null,I(o(K),e=>(i(),p(re,{key:e.value,value:e.value},{default:l(()=>[m(Y(e.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),t(f,{span:24},{default:l(()=>[t(c,{label:"内容"},{default:l(()=>[t(pe,{modelValue:o(a).noticeContent,"onUpdate:modelValue":n[11]||(n[11]=e=>o(a).noticeContent=e),"min-height":192},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title","modelValue"])])}}});export{Ie as default};
