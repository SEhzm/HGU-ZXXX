import{W as C,r as h,I as re,O as de,j as i,L as z,o as g,c as ue,M as _,N as E,f as t,d as e,e as o,k as D,p as f,l as w,J as F,m as N,z as L,B as pe,v as ie}from"./index-C_C7d7c5.js";function se(s){return C({url:"/course/chapters/list",method:"get",params:s})}function ce(s){return C({url:"/course/chapters/"+s,method:"get"})}function me(s){return C({url:"/course/chapters",method:"post",data:s})}function fe(s){return C({url:"/course/chapters",method:"put",data:s})}function he(s){return C({url:"/course/chapters/"+s,method:"delete"})}const _e={class:"app-container"},ve={class:"dialog-footer"},be=pe({name:"Chapters"}),Ve=Object.assign(be,{setup(s){const{proxy:v}=ie(),R=h([]),b=h(!1),Y=h(!0),A=h(!0),S=h([]),$=h(!0),K=h(!0),T=h(0),x=h(""),Q=re({form:{},queryParams:{pageNum:1,pageSize:10,courseId:null,chapterTitle:null,chapterDescription:null,videoUrl:null,position:null,createdAt:null,updatedAt:null},rules:{}}),{queryParams:n,form:r,rules:j}=de(Q);function V(){Y.value=!0,se(n.value).then(d=>{R.value=d.rows,T.value=d.total,Y.value=!1})}function O(){b.value=!1,M()}function M(){r.value={chapterId:null,courseId:null,chapterTitle:null,chapterDescription:null,videoUrl:null,position:null,createdAt:null,updatedAt:null},v.resetForm("chaptersRef")}function y(){n.value.pageNum=1,V()}function J(){v.resetForm("queryRef"),y()}function W(d){S.value=d.map(l=>l.chapterId),$.value=d.length!=1,K.value=!d.length}function G(){M(),b.value=!0,x.value="添加course_chapters"}function P(d){M();const l=d.chapterId||S.value;ce(l).then(p=>{r.value=p.data,b.value=!0,x.value="修改course_chapters"})}function H(){v.$refs.chaptersRef.validate(d=>{d&&(r.value.chapterId!=null?fe(r.value).then(l=>{v.$modal.msgSuccess("修改成功"),b.value=!1,V()}):me(r.value).then(l=>{v.$modal.msgSuccess("新增成功"),b.value=!1,V()}))})}function B(d){const l=d.chapterId||S.value;v.$modal.confirm('是否确认删除course_chapters编号为"'+l+'"的数据项？').then(function(){return he(l)}).then(()=>{V(),v.$modal.msgSuccess("删除成功")}).catch(()=>{})}function X(){v.download("course/chapters/export",{...n.value},`chapters_${new Date().getTime()}.xlsx`)}return V(),(d,l)=>{const p=i("el-input"),u=i("el-form-item"),k=i("el-date-picker"),c=i("el-button"),q=i("el-form"),I=i("el-col"),Z=i("right-toolbar"),ee=i("el-row"),m=i("el-table-column"),le=i("el-table"),te=i("pagination"),ae=i("el-dialog"),U=z("hasPermi"),oe=z("loading");return g(),ue("div",_e,[_(e(q,{model:t(n),ref:"queryRef",inline:!0,"label-width":"68px"},{default:o(()=>[e(u,{label:"课程id",prop:"courseId"},{default:o(()=>[e(p,{modelValue:t(n).courseId,"onUpdate:modelValue":l[0]||(l[0]=a=>t(n).courseId=a),placeholder:"请输入课程id",clearable:"",onKeyup:D(y,["enter"])},null,8,["modelValue"])]),_:1}),e(u,{label:"章节标题",prop:"chapterTitle"},{default:o(()=>[e(p,{modelValue:t(n).chapterTitle,"onUpdate:modelValue":l[1]||(l[1]=a=>t(n).chapterTitle=a),placeholder:"请输入章节标题",clearable:"",onKeyup:D(y,["enter"])},null,8,["modelValue"])]),_:1}),e(u,{label:"章节描述",prop:"chapterDescription"},{default:o(()=>[e(p,{modelValue:t(n).chapterDescription,"onUpdate:modelValue":l[2]||(l[2]=a=>t(n).chapterDescription=a),placeholder:"请输入章节描述",clearable:"",onKeyup:D(y,["enter"])},null,8,["modelValue"])]),_:1}),e(u,{label:"视频链接",prop:"videoUrl"},{default:o(()=>[e(p,{modelValue:t(n).videoUrl,"onUpdate:modelValue":l[3]||(l[3]=a=>t(n).videoUrl=a),placeholder:"请输入视频链接",clearable:"",onKeyup:D(y,["enter"])},null,8,["modelValue"])]),_:1}),e(u,{label:"章节顺序",prop:"position"},{default:o(()=>[e(p,{modelValue:t(n).position,"onUpdate:modelValue":l[4]||(l[4]=a=>t(n).position=a),placeholder:"请输入章节顺序",clearable:"",onKeyup:D(y,["enter"])},null,8,["modelValue"])]),_:1}),e(u,{label:"创建时间",prop:"createdAt"},{default:o(()=>[e(k,{clearable:"",modelValue:t(n).createdAt,"onUpdate:modelValue":l[5]||(l[5]=a=>t(n).createdAt=a),type:"date","value-format":"YYYY-MM-DD",placeholder:"请选择创建时间"},null,8,["modelValue"])]),_:1}),e(u,{label:"更新时间",prop:"updatedAt"},{default:o(()=>[e(k,{clearable:"",modelValue:t(n).updatedAt,"onUpdate:modelValue":l[6]||(l[6]=a=>t(n).updatedAt=a),type:"date","value-format":"YYYY-MM-DD",placeholder:"请选择更新时间"},null,8,["modelValue"])]),_:1}),e(u,null,{default:o(()=>[e(c,{type:"primary",icon:"Search",onClick:y},{default:o(()=>[f("搜索")]),_:1}),e(c,{icon:"Refresh",onClick:J},{default:o(()=>[f("重置")]),_:1})]),_:1})]),_:1},8,["model"]),[[E,t(A)]]),e(ee,{gutter:10,class:"mb8"},{default:o(()=>[e(I,{span:1.5},{default:o(()=>[_((g(),w(c,{type:"primary",plain:"",icon:"Plus",onClick:G},{default:o(()=>[f("新增")]),_:1})),[[U,["course:chapters:add"]]])]),_:1}),e(I,{span:1.5},{default:o(()=>[_((g(),w(c,{type:"success",plain:"",icon:"Edit",disabled:t($),onClick:P},{default:o(()=>[f("修改")]),_:1},8,["disabled"])),[[U,["course:chapters:edit"]]])]),_:1}),e(I,{span:1.5},{default:o(()=>[_((g(),w(c,{type:"danger",plain:"",icon:"Delete",disabled:t(K),onClick:B},{default:o(()=>[f("删除")]),_:1},8,["disabled"])),[[U,["course:chapters:remove"]]])]),_:1}),e(I,{span:1.5},{default:o(()=>[_((g(),w(c,{type:"warning",plain:"",icon:"Download",onClick:X},{default:o(()=>[f("导出")]),_:1})),[[U,["course:chapters:export"]]])]),_:1}),e(Z,{showSearch:t(A),"onUpdate:showSearch":l[7]||(l[7]=a=>F(A)?A.value=a:null),onQueryTable:V},null,8,["showSearch"])]),_:1}),_((g(),w(le,{data:t(R),onSelectionChange:W},{default:o(()=>[e(m,{type:"selection",width:"55",align:"center"}),e(m,{label:"章节id",align:"center",prop:"chapterId"}),e(m,{label:"课程id",align:"center",prop:"courseId"}),e(m,{label:"章节标题",align:"center",prop:"chapterTitle"}),e(m,{label:"章节描述",align:"center",prop:"chapterDescription","show-overflow-tooltip":""}),e(m,{label:"视频链接",align:"center",prop:"videoUrl","show-overflow-tooltip":""}),e(m,{label:"章节顺序",align:"center",prop:"position"}),e(m,{label:"创建时间",align:"center",prop:"createdAt",width:"180"},{default:o(a=>[N("span",null,L(d.parseTime(a.row.createdAt,"{y}-{m}-{d}")),1)]),_:1}),e(m,{label:"更新时间",align:"center",prop:"updatedAt",width:"180"},{default:o(a=>[N("span",null,L(d.parseTime(a.row.updatedAt,"{y}-{m}-{d}")),1)]),_:1}),e(m,{label:"操作",align:"center","class-name":"small-padding fixed-width"},{default:o(a=>[_((g(),w(c,{link:"",type:"primary",icon:"Edit",onClick:ne=>P(a.row)},{default:o(()=>[f("修改")]),_:2},1032,["onClick"])),[[U,["course:chapters:edit"]]]),_((g(),w(c,{link:"",type:"primary",icon:"Delete",onClick:ne=>B(a.row)},{default:o(()=>[f("删除")]),_:2},1032,["onClick"])),[[U,["course:chapters:remove"]]])]),_:1})]),_:1},8,["data"])),[[oe,t(Y)]]),_(e(te,{total:t(T),page:t(n).pageNum,"onUpdate:page":l[8]||(l[8]=a=>t(n).pageNum=a),limit:t(n).pageSize,"onUpdate:limit":l[9]||(l[9]=a=>t(n).pageSize=a),onPagination:V},null,8,["total","page","limit"]),[[E,t(T)>0]]),e(ae,{title:t(x),modelValue:t(b),"onUpdate:modelValue":l[17]||(l[17]=a=>F(b)?b.value=a:null),width:"500px","append-to-body":""},{footer:o(()=>[N("div",ve,[e(c,{type:"primary",onClick:H},{default:o(()=>[f("确 定")]),_:1}),e(c,{onClick:O},{default:o(()=>[f("取 消")]),_:1})])]),default:o(()=>[e(q,{ref:"chaptersRef",model:t(r),rules:t(j),"label-width":"80px"},{default:o(()=>[e(u,{label:"课程id",prop:"courseId"},{default:o(()=>[e(p,{modelValue:t(r).courseId,"onUpdate:modelValue":l[10]||(l[10]=a=>t(r).courseId=a),placeholder:"请输入课程id"},null,8,["modelValue"])]),_:1}),e(u,{label:"章节标题",prop:"chapterTitle"},{default:o(()=>[e(p,{modelValue:t(r).chapterTitle,"onUpdate:modelValue":l[11]||(l[11]=a=>t(r).chapterTitle=a),placeholder:"请输入章节标题"},null,8,["modelValue"])]),_:1}),e(u,{label:"章节描述",prop:"chapterDescription"},{default:o(()=>[e(p,{modelValue:t(r).chapterDescription,"onUpdate:modelValue":l[12]||(l[12]=a=>t(r).chapterDescription=a),placeholder:"请输入章节描述"},null,8,["modelValue"])]),_:1}),e(u,{label:"视频链接",prop:"videoUrl"},{default:o(()=>[e(p,{modelValue:t(r).videoUrl,"onUpdate:modelValue":l[13]||(l[13]=a=>t(r).videoUrl=a),placeholder:"请输入视频链接"},null,8,["modelValue"])]),_:1}),e(u,{label:"章节顺序",prop:"position"},{default:o(()=>[e(p,{modelValue:t(r).position,"onUpdate:modelValue":l[14]||(l[14]=a=>t(r).position=a),placeholder:"请输入章节顺序"},null,8,["modelValue"])]),_:1}),e(u,{label:"创建时间",prop:"createdAt"},{default:o(()=>[e(k,{clearable:"",modelValue:t(r).createdAt,"onUpdate:modelValue":l[15]||(l[15]=a=>t(r).createdAt=a),type:"date","value-format":"YYYY-MM-DD",placeholder:"请选择创建时间"},null,8,["modelValue"])]),_:1}),e(u,{label:"更新时间",prop:"updatedAt"},{default:o(()=>[e(k,{clearable:"",modelValue:t(r).updatedAt,"onUpdate:modelValue":l[16]||(l[16]=a=>t(r).updatedAt=a),type:"date","value-format":"YYYY-MM-DD",placeholder:"请选择更新时间"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title","modelValue"])])}}});export{Ve as default};
