import{r as f,K as oe,T as ne,j as i,A as B,o as g,c as re,G as h,S as E,f as t,d as e,e as o,k as U,p as m,l as y,Q as M,m as x,D as Q,x as de,v as pe}from"./index-DbjG_W2u.js";import{l as ue,g as ie,u as se,a as ce,d as me}from"./chapters-BwT1xCEX.js";const fe={class:"app-container"},he={class:"dialog-footer"},_e=de({name:"Chapters"}),Ve=Object.assign(_e,{setup(ve){const{proxy:_}=pe(),R=f([]),v=f(!1),k=f(!0),C=f(!0),I=f([]),Y=f(!0),$=f(!0),A=f(0),S=f(""),z=oe({form:{},queryParams:{pageNum:1,pageSize:10,courseId:null,chapterTitle:null,chapterDescription:null,videoUrl:null,position:null,createdAt:null,updatedAt:null},rules:{}}),{queryParams:n,form:r,rules:F}=ne(z);function b(){k.value=!0,ue(n.value).then(d=>{R.value=d.rows,A.value=d.total,k.value=!1})}function j(){v.value=!1,T()}function T(){r.value={chapterId:null,courseId:null,chapterTitle:null,chapterDescription:null,videoUrl:null,position:null,createdAt:null,updatedAt:null},_.resetForm("chaptersRef")}function V(){n.value.pageNum=1,b()}function L(){_.resetForm("queryRef"),V()}function G(d){I.value=d.map(l=>l.chapterId),Y.value=d.length!=1,$.value=!d.length}function O(){T(),v.value=!0,S.value="添加course_chapters"}function K(d){T();const l=d.chapterId||I.value;ie(l).then(u=>{r.value=u.data,v.value=!0,S.value="修改course_chapters"})}function H(){_.$refs.chaptersRef.validate(d=>{d&&(r.value.chapterId!=null?se(r.value).then(l=>{_.$modal.msgSuccess("修改成功"),v.value=!1,b()}):ce(r.value).then(l=>{_.$modal.msgSuccess("新增成功"),v.value=!1,b()}))})}function N(d){const l=d.chapterId||I.value;_.$modal.confirm('是否确认删除course_chapters编号为"'+l+'"的数据项？').then(function(){return me(l)}).then(()=>{b(),_.$modal.msgSuccess("删除成功")}).catch(()=>{})}function J(){_.download("course/chapters/export",{...n.value},`chapters_${new Date().getTime()}.xlsx`)}return b(),(d,l)=>{const u=i("el-input"),p=i("el-form-item"),P=i("el-date-picker"),s=i("el-button"),q=i("el-form"),D=i("el-col"),W=i("right-toolbar"),X=i("el-row"),c=i("el-table-column"),Z=i("el-table"),ee=i("pagination"),le=i("el-dialog"),w=B("hasPermi"),te=B("loading");return g(),re("div",fe,[h(e(q,{model:t(n),ref:"queryRef",inline:!0,"label-width":"68px"},{default:o(()=>[e(p,{label:"课程id",prop:"courseId"},{default:o(()=>[e(u,{modelValue:t(n).courseId,"onUpdate:modelValue":l[0]||(l[0]=a=>t(n).courseId=a),placeholder:"请输入课程id",clearable:"",onKeyup:U(V,["enter"])},null,8,["modelValue"])]),_:1}),e(p,{label:"章节标题",prop:"chapterTitle"},{default:o(()=>[e(u,{modelValue:t(n).chapterTitle,"onUpdate:modelValue":l[1]||(l[1]=a=>t(n).chapterTitle=a),placeholder:"请输入章节标题",clearable:"",onKeyup:U(V,["enter"])},null,8,["modelValue"])]),_:1}),e(p,{label:"章节描述",prop:"chapterDescription"},{default:o(()=>[e(u,{modelValue:t(n).chapterDescription,"onUpdate:modelValue":l[2]||(l[2]=a=>t(n).chapterDescription=a),placeholder:"请输入章节描述",clearable:"",onKeyup:U(V,["enter"])},null,8,["modelValue"])]),_:1}),e(p,{label:"视频链接",prop:"videoUrl"},{default:o(()=>[e(u,{modelValue:t(n).videoUrl,"onUpdate:modelValue":l[3]||(l[3]=a=>t(n).videoUrl=a),placeholder:"请输入视频链接",clearable:"",onKeyup:U(V,["enter"])},null,8,["modelValue"])]),_:1}),e(p,{label:"章节顺序",prop:"position"},{default:o(()=>[e(u,{modelValue:t(n).position,"onUpdate:modelValue":l[4]||(l[4]=a=>t(n).position=a),placeholder:"请输入章节顺序",clearable:"",onKeyup:U(V,["enter"])},null,8,["modelValue"])]),_:1}),e(p,{label:"创建时间",prop:"createdAt"},{default:o(()=>[e(P,{clearable:"",modelValue:t(n).createdAt,"onUpdate:modelValue":l[5]||(l[5]=a=>t(n).createdAt=a),type:"date","value-format":"YYYY-MM-DD",placeholder:"请选择创建时间"},null,8,["modelValue"])]),_:1}),e(p,{label:"更新时间",prop:"updatedAt"},{default:o(()=>[e(P,{clearable:"",modelValue:t(n).updatedAt,"onUpdate:modelValue":l[6]||(l[6]=a=>t(n).updatedAt=a),type:"date","value-format":"YYYY-MM-DD",placeholder:"请选择更新时间"},null,8,["modelValue"])]),_:1}),e(p,null,{default:o(()=>[e(s,{type:"primary",icon:"Search",onClick:V},{default:o(()=>[m("搜索")]),_:1}),e(s,{icon:"Refresh",onClick:L},{default:o(()=>[m("重置")]),_:1})]),_:1})]),_:1},8,["model"]),[[E,t(C)]]),e(X,{gutter:10,class:"mb8"},{default:o(()=>[e(D,{span:1.5},{default:o(()=>[h((g(),y(s,{type:"primary",plain:"",icon:"Plus",onClick:O},{default:o(()=>[m("新增 ")]),_:1})),[[w,["course:chapters:add"]]])]),_:1}),e(D,{span:1.5},{default:o(()=>[h((g(),y(s,{type:"success",plain:"",icon:"Edit",disabled:t(Y),onClick:K},{default:o(()=>[m("修改 ")]),_:1},8,["disabled"])),[[w,["course:chapters:edit"]]])]),_:1}),e(D,{span:1.5},{default:o(()=>[h((g(),y(s,{type:"danger",plain:"",icon:"Delete",disabled:t($),onClick:N},{default:o(()=>[m("删除 ")]),_:1},8,["disabled"])),[[w,["course:chapters:remove"]]])]),_:1}),e(D,{span:1.5},{default:o(()=>[h((g(),y(s,{type:"warning",plain:"",icon:"Download",onClick:J},{default:o(()=>[m("导出 ")]),_:1})),[[w,["course:chapters:export"]]])]),_:1}),e(W,{showSearch:t(C),"onUpdate:showSearch":l[7]||(l[7]=a=>M(C)?C.value=a:null),onQueryTable:b},null,8,["showSearch"])]),_:1}),h((g(),y(Z,{data:t(R),onSelectionChange:G},{default:o(()=>[e(c,{type:"selection",width:"55",align:"center"}),e(c,{label:"章节id",align:"center",prop:"chapterId"}),e(c,{label:"课程id",align:"center",prop:"courseId"}),e(c,{label:"章节标题",align:"center",prop:"chapterTitle"}),e(c,{label:"章节描述",align:"center",prop:"chapterDescription","show-overflow-tooltip":""}),e(c,{label:"视频链接",align:"center",prop:"videoUrl","show-overflow-tooltip":""}),e(c,{label:"章节顺序",align:"center",prop:"position"}),e(c,{label:"创建时间",align:"center",prop:"createdAt",width:"180"},{default:o(a=>[x("span",null,Q(d.parseTime(a.row.createdAt,"{y}-{m}-{d}")),1)]),_:1}),e(c,{label:"更新时间",align:"center",prop:"updatedAt",width:"180"},{default:o(a=>[x("span",null,Q(d.parseTime(a.row.updatedAt,"{y}-{m}-{d}")),1)]),_:1}),e(c,{label:"操作",align:"center","class-name":"small-padding fixed-width"},{default:o(a=>[h((g(),y(s,{link:"",type:"primary",icon:"Edit",onClick:ae=>K(a.row)},{default:o(()=>[m("修改 ")]),_:2},1032,["onClick"])),[[w,["course:chapters:edit"]]]),h((g(),y(s,{link:"",type:"primary",icon:"Delete",onClick:ae=>N(a.row)},{default:o(()=>[m("删除 ")]),_:2},1032,["onClick"])),[[w,["course:chapters:remove"]]])]),_:1})]),_:1},8,["data"])),[[te,t(k)]]),h(e(ee,{total:t(A),page:t(n).pageNum,"onUpdate:page":l[8]||(l[8]=a=>t(n).pageNum=a),limit:t(n).pageSize,"onUpdate:limit":l[9]||(l[9]=a=>t(n).pageSize=a),onPagination:b},null,8,["total","page","limit"]),[[E,t(A)>0]]),e(le,{title:t(S),modelValue:t(v),"onUpdate:modelValue":l[15]||(l[15]=a=>M(v)?v.value=a:null),width:"500px","append-to-body":""},{footer:o(()=>[x("div",he,[e(s,{type:"primary",onClick:H},{default:o(()=>[m("确 定")]),_:1}),e(s,{onClick:j},{default:o(()=>[m("取 消")]),_:1})])]),default:o(()=>[e(q,{ref:"chaptersRef",model:t(r),rules:t(F),"label-width":"80px"},{default:o(()=>[e(p,{label:"课程id",prop:"courseId"},{default:o(()=>[e(u,{modelValue:t(r).courseId,"onUpdate:modelValue":l[10]||(l[10]=a=>t(r).courseId=a),placeholder:"请输入课程id"},null,8,["modelValue"])]),_:1}),e(p,{label:"章节标题",prop:"chapterTitle"},{default:o(()=>[e(u,{modelValue:t(r).chapterTitle,"onUpdate:modelValue":l[11]||(l[11]=a=>t(r).chapterTitle=a),placeholder:"请输入章节标题"},null,8,["modelValue"])]),_:1}),e(p,{label:"章节描述",prop:"chapterDescription"},{default:o(()=>[e(u,{modelValue:t(r).chapterDescription,"onUpdate:modelValue":l[12]||(l[12]=a=>t(r).chapterDescription=a),placeholder:"请输入章节描述"},null,8,["modelValue"])]),_:1}),e(p,{label:"视频链接",prop:"videoUrl"},{default:o(()=>[e(u,{modelValue:t(r).videoUrl,"onUpdate:modelValue":l[13]||(l[13]=a=>t(r).videoUrl=a),placeholder:"请输入视频链接"},null,8,["modelValue"])]),_:1}),e(p,{label:"章节顺序",prop:"position"},{default:o(()=>[e(u,{modelValue:t(r).position,"onUpdate:modelValue":l[14]||(l[14]=a=>t(r).position=a),placeholder:"请输入章节顺序"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title","modelValue"])])}}});export{Ve as default};
