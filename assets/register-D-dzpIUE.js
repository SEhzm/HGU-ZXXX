import{_ as R,r as f,o as h,c as w,d as e,e as t,f as o,a as I,h as U,j as d,k as y,l as z,m as i,n as B,q as K,p as N,s as S,t as T,H as M,E as $,v as H}from"./index-Iul5WN1i.js";import{_ as j}from"./study-CUOxtqa7.js";const b=c=>(S("data-v-b3364ba3"),c=c(),T(),c),A={class:"register"},F=b(()=>i("img",{src:j,style:{position:"relative",right:"200px"}},null,-1)),L=b(()=>i("h3",{class:"title"},"河北地质大学在线学习平台",-1)),D={class:"register-code"},G=["src"],J={key:0},O={key:1},Q={style:{float:"right"}},W=b(()=>i("div",{class:"el-register-footer"},[i("span",null,"Copyright © 2024 圆桌组 All Rights Reserved.")],-1)),X={__name:"register",setup(c){const x=I(),{proxy:k}=H(),s=f({username:"",password:"",confirmPassword:"",code:"",uuid:""}),C={username:[{required:!0,trigger:"blur",message:"请输入您的账号"},{min:2,max:20,message:"用户账号长度必须介于 2 和 20 之间",trigger:"blur"}],password:[{required:!0,trigger:"blur",message:"请输入您的密码"},{min:5,max:20,message:"用户密码长度必须介于 5 和 20 之间",trigger:"blur"},{pattern:/^[^<>"'|\\]+$/,message:`不能包含非法字符：< > " ' \\ |`,trigger:"blur"}],confirmPassword:[{required:!0,trigger:"blur",message:"请再次输入您的密码"},{required:!0,validator:(l,r,a)=>{s.value.password!==r?a(new Error("两次输入的密码不一致")):a()},trigger:"blur"}],code:[{required:!0,trigger:"change",message:"请输入验证码"}]},V=f(""),p=f(!1),m=f(!0);function g(){k.$refs.registerRef.validate(l=>{l&&(p.value=!0,M(s.value).then(r=>{const a=s.value.username;$.alert("<font color='red'>恭喜你，您的账号 "+a+" 注册成功！</font>","系统提示",{dangerouslyUseHTMLString:!0,type:"success"}).then(()=>{x.push("/login")}).catch(()=>{})}).catch(()=>{p.value=!1,m&&v()}))})}function v(){U().then(l=>{m.value=l.captchaEnabled===void 0?!0:l.captchaEnabled,m.value&&(V.value="data:image/gif;base64,"+l.img,s.value.uuid=l.uuid)})}return v(),(l,r)=>{const a=d("svg-icon"),_=d("el-input"),u=d("el-form-item"),q=d("el-button"),E=d("router-link"),P=d("el-form");return h(),w("div",A,[F,e(P,{ref:"registerRef",model:o(s),rules:C,class:"register-form"},{default:t(()=>[L,e(u,{prop:"username"},{default:t(()=>[e(_,{modelValue:o(s).username,"onUpdate:modelValue":r[0]||(r[0]=n=>o(s).username=n),type:"text",size:"large","auto-complete":"off",placeholder:"账号"},{prefix:t(()=>[e(a,{"icon-class":"user",class:"el-input__icon input-icon"})]),_:1},8,["modelValue"])]),_:1}),e(u,{prop:"password"},{default:t(()=>[e(_,{modelValue:o(s).password,"onUpdate:modelValue":r[1]||(r[1]=n=>o(s).password=n),type:"password",size:"large","auto-complete":"off",placeholder:"密码",onKeyup:y(g,["enter"])},{prefix:t(()=>[e(a,{"icon-class":"password",class:"el-input__icon input-icon"})]),_:1},8,["modelValue"])]),_:1}),e(u,{prop:"confirmPassword"},{default:t(()=>[e(_,{modelValue:o(s).confirmPassword,"onUpdate:modelValue":r[2]||(r[2]=n=>o(s).confirmPassword=n),type:"password",size:"large","auto-complete":"off",placeholder:"确认密码",onKeyup:y(g,["enter"])},{prefix:t(()=>[e(a,{"icon-class":"password",class:"el-input__icon input-icon"})]),_:1},8,["modelValue"])]),_:1}),o(m)?(h(),z(u,{key:0,prop:"code"},{default:t(()=>[e(_,{size:"large",modelValue:o(s).code,"onUpdate:modelValue":r[3]||(r[3]=n=>o(s).code=n),"auto-complete":"off",placeholder:"验证码",style:{width:"63%"},onKeyup:y(g,["enter"])},{prefix:t(()=>[e(a,{"icon-class":"validCode",class:"el-input__icon input-icon"})]),_:1},8,["modelValue"]),i("div",D,[i("img",{src:o(V),onClick:v,class:"register-code-img"},null,8,G)])]),_:1})):B("",!0),e(u,{style:{width:"100%"}},{default:t(()=>[e(q,{loading:o(p),size:"large",type:"primary",style:{width:"100%"},onClick:K(g,["prevent"])},{default:t(()=>[o(p)?(h(),w("span",O,"注 册 中...")):(h(),w("span",J,"注 册"))]),_:1},8,["loading"]),i("div",Q,[e(E,{class:"link-type",to:"/login"},{default:t(()=>[N("使用已有账户登录")]),_:1})])]),_:1})]),_:1},8,["model"]),W])}}},se=R(X,[["__scopeId","data-v-b3364ba3"]]);export{se as default};
