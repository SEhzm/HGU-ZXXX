import{r as g,K as Ve,T as ye,j as d,A as O,o as m,c as M,G as v,S as H,f as o,d as e,e as t,k as x,F as J,B as W,l as b,p as i,Q as K,m as C,D as P,x as he,v as Ce}from"./index-xkeR0p3z.js";import{l as we,a as Ue,u as De,b as ke,d as Ie,c as Ae}from"./course-D9AxpRja.js";const Se={class:"app-container"},xe={class:"dialog-footer"},Ne=C("div",{class:"el-upload__text"},[i(" Drop file here or "),C("em",null,"click to upload")],-1),Ye=C("div",{class:"el-upload__tip"}," jpg/png files with a size less than 500kb ",-1),Te={class:"dialog-footer"},$e=he({name:"Course"}),Pe=Object.assign($e,{setup(Re){const{proxy:_}=Ce(),{course_category:N}=_.useDict("course_category"),B=g([]),V=g(!1),w=g(!1),Y=g(!0),D=g(!0),T=g([]),F=g(!0),q=g(!0),$=g(0),k=g(""),X=Ve({form:{},queryParams:{pageNum:1,pageSize:10,courseName:null,courseDescription:null,userId:null,createdAt:null,updatedAt:null,teacher:null,courseCategory:null,chapterId:null,courseId:null,chapterTitle:null,chapterDescription:null,videoUrl:null,position:null},rules:{}}),{queryParams:r,form:u,rules:z}=ye(X);function y(){Y.value=!0,we(r.value).then(s=>{B.value=s.rows,$.value=s.total,Y.value=!1})}function E(){w.value=!1,V.value=!1,I()}function I(){u.value={courseId:null,courseName:null,courseDescription:null,userId:null,createdAt:null,updatedAt:null,teacher:null,courseCategory:null,courseImg:null},_.resetForm("courseRef")}function U(){r.value.pageNum=1,y()}function Z(){_.resetForm("queryRef"),U()}function ee(s){T.value=s.map(a=>a.courseId),F.value=s.length!=1,q.value=!s.length}function le(){I(),V.value=!0,k.value="添加course"}function Q(s){I();const a=s.courseId||T.value;Ue(a).then(p=>{u.value=p.data,V.value=!0,k.value="修改course"})}function oe(){_.$refs.courseRef.validate(s=>{s&&(u.value.courseId!=null?De(u.value).then(a=>{_.$modal.msgSuccess("修改成功"),V.value=!1,y()}):ke(u.value).then(a=>{_.$modal.msgSuccess("新增成功"),V.value=!1,y()}))})}function j(s){const a=s.courseId||T.value;_.$modal.confirm('是否确认删除course编号为"'+a+'"的数据项？').then(function(){return Ie(a)}).then(()=>{y(),_.$modal.msgSuccess("删除成功")}).catch(()=>{})}function ae(s){I(),w.value=!0,this.form.courseId=s.courseId}function te(){Ae(u.value).then(s=>{_.$modal.msgSuccess("新增成功"),w.value=!1,y()})}function ue(){_.download("course/course/export",{...r.value},`course_${new Date().getTime()}.xlsx`)}return y(),(s,a)=>{const p=d("el-input"),n=d("el-form-item"),A=d("el-date-picker"),re=d("el-option"),ne=d("el-select"),c=d("el-button"),R=d("el-form"),S=d("el-col"),de=d("right-toolbar"),se=d("el-row"),f=d("el-table-column"),pe=d("dict-tag"),ie=d("el-table"),ce=d("pagination"),me=d("el-radio"),fe=d("el-radio-group"),L=d("el-dialog"),_e=d("upload-filled"),ge=d("el-icon"),ve=d("el-upload"),h=O("hasPermi"),be=O("loading");return m(),M("div",Se,[v(e(R,{model:o(r),ref:"queryRef",inline:!0,"label-width":"68px"},{default:t(()=>[e(n,{label:"课程名",prop:"courseName"},{default:t(()=>[e(p,{modelValue:o(r).courseName,"onUpdate:modelValue":a[0]||(a[0]=l=>o(r).courseName=l),placeholder:"请输入课程名",clearable:"",onKeyup:x(U,["enter"])},null,8,["modelValue"])]),_:1}),e(n,{label:"课程简介",prop:"courseDescription"},{default:t(()=>[e(p,{modelValue:o(r).courseDescription,"onUpdate:modelValue":a[1]||(a[1]=l=>o(r).courseDescription=l),placeholder:"请输入课程简介",clearable:"",onKeyup:x(U,["enter"])},null,8,["modelValue"])]),_:1}),e(n,{label:"创建者id",prop:"userId"},{default:t(()=>[e(p,{modelValue:o(r).userId,"onUpdate:modelValue":a[2]||(a[2]=l=>o(r).userId=l),placeholder:"请输入创建者id",clearable:"",onKeyup:x(U,["enter"])},null,8,["modelValue"])]),_:1}),e(n,{label:"创建时间",prop:"createdAt"},{default:t(()=>[e(A,{clearable:"",modelValue:o(r).createdAt,"onUpdate:modelValue":a[3]||(a[3]=l=>o(r).createdAt=l),type:"date","value-format":"YYYY-MM-DD",placeholder:"请选择创建时间"},null,8,["modelValue"])]),_:1}),e(n,{label:"更新时间",prop:"updatedAt"},{default:t(()=>[e(A,{clearable:"",modelValue:o(r).updatedAt,"onUpdate:modelValue":a[4]||(a[4]=l=>o(r).updatedAt=l),type:"date","value-format":"YYYY-MM-DD",placeholder:"请选择更新时间"},null,8,["modelValue"])]),_:1}),e(n,{label:"讲师",prop:"teacher"},{default:t(()=>[e(p,{modelValue:o(r).teacher,"onUpdate:modelValue":a[5]||(a[5]=l=>o(r).teacher=l),placeholder:"请输入讲师",clearable:"",onKeyup:x(U,["enter"])},null,8,["modelValue"])]),_:1}),e(n,{label:"课程分类",prop:"courseCategory"},{default:t(()=>[e(ne,{modelValue:o(r).courseCategory,"onUpdate:modelValue":a[6]||(a[6]=l=>o(r).courseCategory=l),placeholder:"请选择课程分类",clearable:""},{default:t(()=>[(m(!0),M(J,null,W(o(N),l=>(m(),b(re,{key:l.value,label:l.label,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(n,null,{default:t(()=>[e(c,{type:"primary",icon:"Search",onClick:U},{default:t(()=>[i("搜索")]),_:1}),e(c,{icon:"Refresh",onClick:Z},{default:t(()=>[i("重置")]),_:1})]),_:1})]),_:1},8,["model"]),[[H,o(D)]]),e(se,{gutter:10,class:"mb8"},{default:t(()=>[e(S,{span:1.5},{default:t(()=>[v((m(),b(c,{type:"primary",plain:"",icon:"Plus",onClick:le},{default:t(()=>[i("新增 ")]),_:1})),[[h,["course:course:add"]]])]),_:1}),e(S,{span:1.5},{default:t(()=>[v((m(),b(c,{type:"success",plain:"",icon:"Edit",disabled:o(F),onClick:Q},{default:t(()=>[i("修改 ")]),_:1},8,["disabled"])),[[h,["course:course:edit"]]])]),_:1}),e(S,{span:1.5},{default:t(()=>[v((m(),b(c,{type:"danger",plain:"",icon:"Delete",disabled:o(q),onClick:j},{default:t(()=>[i("删除 ")]),_:1},8,["disabled"])),[[h,["course:course:remove"]]])]),_:1}),e(S,{span:1.5},{default:t(()=>[v((m(),b(c,{type:"warning",plain:"",icon:"Download",onClick:ue},{default:t(()=>[i("导出 ")]),_:1})),[[h,["course:course:export"]]])]),_:1}),e(de,{showSearch:o(D),"onUpdate:showSearch":a[7]||(a[7]=l=>K(D)?D.value=l:null),onQueryTable:y},null,8,["showSearch"])]),_:1}),v((m(),b(ie,{data:o(B),onSelectionChange:ee},{default:t(()=>[e(f,{type:"selection",width:"55",align:"center"}),e(f,{label:"课程id",align:"center",prop:"courseId"}),e(f,{label:"课程名",align:"center",prop:"courseName"}),e(f,{label:"课程简介",align:"center",prop:"courseDescription","show-overflow-tooltip":""}),e(f,{label:"创建者id",align:"center",prop:"userId"}),e(f,{label:"创建时间",align:"center",prop:"createdAt",width:"180"},{default:t(l=>[C("span",null,P(s.parseTime(l.row.createdAt,"{y}-{m}-{d}")),1)]),_:1}),e(f,{label:"更新时间",align:"center",prop:"updatedAt",width:"180"},{default:t(l=>[C("span",null,P(s.parseTime(l.row.updatedAt,"{y}-{m}-{d}")),1)]),_:1}),e(f,{label:"讲师",align:"center",prop:"teacher"}),e(f,{label:"课程分类",align:"center",prop:"courseCategory"},{default:t(l=>[e(pe,{options:o(N),value:l.row.courseCategory},null,8,["options","value"])]),_:1}),e(f,{label:"课程封面",align:"center",prop:"courseImg","show-overflow-tooltip":""}),e(f,{label:"操作",align:"center","class-name":"small-padding fixed-width"},{default:t(l=>[v((m(),b(c,{link:"",type:"primary",icon:"Edit",onClick:G=>Q(l.row)},{default:t(()=>[i("修改 ")]),_:2},1032,["onClick"])),[[h,["course:course:edit"]]]),v((m(),b(c,{link:"",type:"primary",icon:"Delete",onClick:G=>j(l.row)},{default:t(()=>[i("删除 ")]),_:2},1032,["onClick"])),[[h,["course:course:remove"]]]),v((m(),b(c,{link:"",type:"primary",onClick:G=>ae(l.row)},{default:t(()=>[i(" 上传章节 ")]),_:2},1032,["onClick"])),[[h,["course:course:add"]]])]),_:1})]),_:1},8,["data"])),[[be,o(Y)]]),v(e(ce,{total:o($),page:o(r).pageNum,"onUpdate:page":a[8]||(a[8]=l=>o(r).pageNum=l),limit:o(r).pageSize,"onUpdate:limit":a[9]||(a[9]=l=>o(r).pageSize=l),onPagination:y},null,8,["total","page","limit"]),[[H,o($)>0]]),e(L,{title:o(k),modelValue:o(V),"onUpdate:modelValue":a[18]||(a[18]=l=>K(V)?V.value=l:null),width:"500px","append-to-body":""},{footer:t(()=>[C("div",xe,[e(c,{type:"primary",onClick:oe},{default:t(()=>[i("确 定")]),_:1}),e(c,{onClick:E},{default:t(()=>[i("取 消")]),_:1})])]),default:t(()=>[e(R,{ref:"courseRef",model:o(u),rules:o(z),"label-width":"80px"},{default:t(()=>[e(n,{label:"课程名",prop:"courseName"},{default:t(()=>[e(p,{modelValue:o(u).courseName,"onUpdate:modelValue":a[10]||(a[10]=l=>o(u).courseName=l),placeholder:"请输入课程名"},null,8,["modelValue"])]),_:1}),e(n,{label:"课程简介",prop:"courseDescription"},{default:t(()=>[e(p,{modelValue:o(u).courseDescription,"onUpdate:modelValue":a[11]||(a[11]=l=>o(u).courseDescription=l),placeholder:"请输入课程简介"},null,8,["modelValue"])]),_:1}),e(n,{label:"创建者id",prop:"userId"},{default:t(()=>[e(p,{modelValue:o(u).userId,"onUpdate:modelValue":a[12]||(a[12]=l=>o(u).userId=l),placeholder:"请输入创建者id"},null,8,["modelValue"])]),_:1}),e(n,{label:"创建时间",prop:"createdAt"},{default:t(()=>[e(A,{clearable:"",modelValue:o(u).createdAt,"onUpdate:modelValue":a[13]||(a[13]=l=>o(u).createdAt=l),type:"date","value-format":"YYYY-MM-DD",placeholder:"请选择创建时间"},null,8,["modelValue"])]),_:1}),e(n,{label:"更新时间",prop:"updatedAt"},{default:t(()=>[e(A,{clearable:"",modelValue:o(u).updatedAt,"onUpdate:modelValue":a[14]||(a[14]=l=>o(u).updatedAt=l),type:"date","value-format":"YYYY-MM-DD",placeholder:"请选择更新时间"},null,8,["modelValue"])]),_:1}),e(n,{label:"讲师",prop:"teacher"},{default:t(()=>[e(p,{modelValue:o(u).teacher,"onUpdate:modelValue":a[15]||(a[15]=l=>o(u).teacher=l),placeholder:"请输入讲师"},null,8,["modelValue"])]),_:1}),e(n,{label:"课程分类",prop:"courseCategory"},{default:t(()=>[e(fe,{modelValue:o(u).courseCategory,"onUpdate:modelValue":a[16]||(a[16]=l=>o(u).courseCategory=l)},{default:t(()=>[(m(!0),M(J,null,W(o(N),l=>(m(),b(me,{key:l.value,label:l.value},{default:t(()=>[i(P(l.label),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(n,{label:"课程封面",prop:"courseImg"},{default:t(()=>[e(p,{modelValue:o(u).courseImg,"onUpdate:modelValue":a[17]||(a[17]=l=>o(u).courseImg=l),placeholder:"请输入课程封面"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title","modelValue"]),e(L,{title:o(k),modelValue:o(w),"onUpdate:modelValue":a[25]||(a[25]=l=>K(w)?w.value=l:null),width:"500px","append-to-body":""},{footer:t(()=>[C("div",Te,[e(c,{type:"primary",onClick:te},{default:t(()=>[i("确 定")]),_:1}),e(c,{onClick:E},{default:t(()=>[i("取 消")]),_:1})])]),default:t(()=>[e(R,{ref:"chaptersRef",model:o(u),rules:o(z),"label-width":"80px"},{default:t(()=>[e(n,{label:"课程id",prop:"courseId"},{default:t(()=>[e(p,{disabled:"",modelValue:o(u).courseId,"onUpdate:modelValue":a[19]||(a[19]=l=>o(u).courseId=l),placeholder:""},null,8,["modelValue"])]),_:1}),e(n,{label:"章节标题",prop:"chapterTitle"},{default:t(()=>[e(p,{modelValue:o(u).chapterTitle,"onUpdate:modelValue":a[20]||(a[20]=l=>o(u).chapterTitle=l),placeholder:"请输入章节标题"},null,8,["modelValue"])]),_:1}),e(n,{label:"章节描述",prop:"chapterDescription"},{default:t(()=>[e(p,{modelValue:o(u).chapterDescription,"onUpdate:modelValue":a[21]||(a[21]=l=>o(u).chapterDescription=l),placeholder:"请输入章节描述"},null,8,["modelValue"])]),_:1}),e(n,{label:"视频链接",prop:"videoUrl"},{default:t(()=>[e(p,{modelValue:o(u).videoUrl,"onUpdate:modelValue":a[22]||(a[22]=l=>o(u).videoUrl=l),placeholder:"请输入视频链接"},null,8,["modelValue"])]),_:1}),e(n,{label:"视频文件",prop:"videoUrl"},{default:t(()=>[e(ve,{class:"upload-demo",drag:"",action:"https://run.mocky.io/v3/9d059bf9-4660-45f2-925d-ce80ad6c4d15",multiple:""},{tip:t(()=>[Ye]),default:t(()=>[e(ge,{class:"el-icon--upload"},{default:t(()=>[e(_e)]),_:1}),Ne]),_:1}),e(p,{modelValue:o(u).videoUrl,"onUpdate:modelValue":a[23]||(a[23]=l=>o(u).videoUrl=l),placeholder:"请输入视频链接"},null,8,["modelValue"])]),_:1}),e(n,{label:"章节顺序",prop:"position"},{default:t(()=>[e(p,{modelValue:o(u).position,"onUpdate:modelValue":a[24]||(a[24]=l=>o(u).position=l),placeholder:"请输入章节顺序"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title","modelValue"])])}}});export{Pe as default};
